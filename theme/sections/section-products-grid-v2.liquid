<!-- <link rel="stylesheet" href="{{ 'product-card.css' | asset_url }}"> -->
<link rel="stylesheet" href="{{ 'section-products-grid.css' | asset_url }}">
{% assign _lazyload = settings.use_lazyload %}
{% if section.settings.boxed_layout %}{% assign _layout = 'boxed' %}{% else %}{% assign _layout = 'full' %}{% endif %}
{% if section.settings.carousel_layout %}{% assign _type = 'carousel' %}{% else %}{% assign _type = 'row' %}{% endif %}

{% assign collection = collections[section.settings.collection] %}
{% assign _padding_item = section.settings.padding_item %}
{% assign _total_items = section.settings.total_items %}

{% assign _border_price        = section.settings.border_price %}

{% render 'include-item-per-row' %}

{% assign _type_column = section.settings.type %}
{% if _type_column != 'none' %}
   {%- assign checker = 1 -%}
{% else %}
   {%- assign checker = 0 -%}
{% endif %} 

{%- assign _title_style = section.settings.title_style -%}
{% assign _title = section.settings.heading_text %}
{% assign _subtitle = section.settings.subheading_text %}

{% capture head_title %}
  {% unless _title_style == 'none' %}
    <div class="text-{{_title_style}} title-wrapper{% if _title_style == 'left' %} d-lg-flex{% endif %}">
      <div class="title-inner">
        <div class="title-subtitle">
          {% unless _title == blank %}<p class="title h3">{{ _title }}</p>{% endunless %}
          {% unless _subtitle == blank %}<p class="subtitle h4">{{ _subtitle }}</p>{% endunless %} 
        </div>
      </div>

      {%- if _title_style == 'left' -%}<div class="view-all d-none d-lg-block"><a href="{{ collection.url }}">{{ 'general.text.view_all' | t }}</a></div>{% endif %}    
    </div>
  {% endunless %}  
{% endcapture %}

<div id="ps-{{ section.id }}"
     class="product-slider-section layout-{{_layout }} section-show-{{section.id}}"      
     data-section-type="product-grid-v2"
     data-section-id="{{section.id}}"
     {% unless section.settings.background_color == blank %} style="background: {{section.settings.background_color}}"{% endunless %}>

  {% if _layout == 'boxed' %}<div class="container">{% endif %}
    {% if section.settings.heading_position == 'single_block' %}
      {{head_title}}
    {% endif %}
    {% unless section.settings.collection == blank or collection.products_count == 0 %}

      <div class="product-slider-content{% if _type_column != 'none' %} row{% endif %}">
        {% if _type_column != 'none' and section.settings.position == '1' %}
          <div class="f-column pos-left">{% render 'include-special-block-2' %}</div>
        {% endif %}

        <div class="{% if _type_column != 'none' %}l-column{% endif %}">
          {% if section.settings.heading_position == 'inline_block' %}
            {{head_title}}
          {% endif %}
          <div class="padding-item-{{_padding_item}}{% if _type == 'row' %} row{% else %} ps-list owl-carousel ps-list-{{ section.id }}{% endif %}"  {% render 'include-carousel-attr2' , _type: _type %}>

            {% for product in collection.products limit: _total_items %}
              {% if _type == 'row' %}<div class="products-grid-item {{ item_class }}">{% endif %}
                {% render 'product-item' , product: product , _lazyload : _lazyload , collection: collection %}
              {% if _type == 'row' %}</div>{% endif %}
            {% endfor %}
          </div>
        </div>

        {% if _type_column != 'none' and section.settings.position == '2' %}
          <div class="f-column pos-right">{% render 'include-special-block-2' %}</div>
        {% endif %}

        {%- if _title_style == 'left'  -%}<div class="view-all text-center d-lg-none d-xl-none"><a href="{{ collection.url }}">{{ 'general.text.view_all' | t }}</a></div>{% endif %}
      </div>

    {% else %}

      <div class="product-slider-content">
        <div class="row">
          {% for i in (1.._item_resp[0])  %}
            <div class="{{ items_class }}">
              <div class="product-wrapper">

                <div class="product-head">
                  <div class="product-image">

                    <div class="empty-image">
                      {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
                      {{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}
                    </div>

                  </div>
                </div>

                <div class="product-content">
                  <div class="pc-inner">
                    <h5 class="product-name">{{ 'homepage.onboarding.product_title' | t }}</h5>
                    <div class="product-price"><span class="price">{{ 1999 | money }}</span></div>
                  </div>
                </div>

              </div>
            </div>
          {% endfor %}
        </div>
      </div>

    {% endunless %}

  {% if _layout == 'boxed' %}</div>{% endif %}
</div>

  {% if _type_column != 'none' %}
<style>
.product-slider-section.section-show-{{section.id}} .f-column{
  padding:0 15px;
  width: {{ section.settings.column_content_width }}%;
}
.product-slider-section.section-show-{{section.id}} .l-column{
  padding:0 15px;
  width: calc(100% - {{ section.settings.column_content_width }}%);
}

@media (min-width: 992px) and (max-width: 1439px){
   .product-slider-section.section-show-{{section.id}} .f-column{
      width: 30%;
   }
   .product-slider-section.section-show-{{section.id}} .l-column{
      width: 70%;
   }
}
</style>
{% endif %}
{% schema %}
{
   "name":"Products Grid V2",
   "settings":[
      {
         "type":"paragraph",
         "content":"Created by 'Products Grid v2' section"
      },
      {
         "type":"text",
         "id":"title",
         "label":"Section Label",
         "default":"Products Grid v2"
      },
      {
         "type":"header",
         "content":"LAYOUT"
      },
      {
         "type":"checkbox",
         "id":"boxed_layout",
         "label":"Boxed layout",
         "default":true
      }, 
      {
        "type":"color",
        "id":"background_color",
        "label":"Background color"
      },
      {
         "type":"checkbox",
         "id":"padding_item",
         "label":"Padding items",
         "default":true
      },
      {
       "type":"checkbox",
       "id":"border_price",
       "label":"Border for main price"
      },
      {
         "type":"header",
         "content":"Carousel settings"
      },
      {
         "type":"checkbox",
         "id":"carousel_layout",
         "label":"Enable Carousel Layout"
      },
      {
         "type":"checkbox",
         "id":"autoplay",
         "label":"Enable Autoplay"
      },
      {
         "type":"checkbox",
         "id":"loop",
         "label":"Enable Loop"
      },
      {
         "type":"checkbox",
         "id":"nav",
         "label":"Show Next & Prev arrows",
         "default":true
      },
      {
         "type":"checkbox",
         "id":"dot",
         "label":"Show Dots",
         "default":false
      },
      {
         "type":"checkbox",
         "id":"smoothAutoplay",
         "label":"Enable Smooth Autoplay"
      },
      {
         "type":"range",
         "id":"nav_styles",
         "label":"Style Next and Prev arrows",
         "default":1,
         "min":1,
         "max":3,
         "step":1
      },
      {
         "type":"header",
         "content":"Heading content"
      },
      {
        "type":"select",
        "id":"title_style",
        "label":"Heading style",
        "options":[
          {"value":"center", "label":"Center"},
          {"value":"left", "label":"Left"},
          {"value":"none", "label":"None"}
        ]
      },
      {
         "type":"text",
         "id":"heading_text",
         "label":"Heading",
         "default":"Heading"
      },
      {
         "type":"text",
         "id":"subheading_text",
         "label":"Subheading",
         "default":"Subheading"
      },
      {
         "type":"select",
         "id":"heading_position",
         "label":"Heading position",
         "options":[
            {
               "value":"single_block",
               "label":"Single block"
            },
            {
               "value":"inline_block",
               "label":"Inline block"
            }
         ],
         "default":"single_block"
      },
      {
         "type":"header",
         "content":"LAYOUT CONTENT"
      },

      {
         "id":"collection",
         "type":"collection",
         "label":"Collection item"
      },
      {
         "type"  :"text",
         "id"    :"items_resp",
         "label":"Max number of items per row",
         "placeholder": "desktop,tablet,mobile",
         "info": "E.g: 4,2,2",
         "default": "4,2,2"
      },
      {
         "type":"range",
         "id":"total_items",
         "label":"Total items",
         "default":12,
         "min":1,
         "max":30,
         "step":1
      },
      {
        "type":"header",
        "content":"Column content"
      },
      {
         "type":"select",
         "id":"position",
         "label":"Position",
         "default":"1",
         "options":[
            {
               "value":"1",
               "label":"Left"
            },
            {
               "value":"2",
               "label":"Right"
            }
         ]
      },
      {
         "type":"range",
         "id":"column_content_width",
         "label":"Width",
         "min":0,
         "max":100,
         "default":25,
         "unit":"%",
         "step":1
      },
      {
         "type":"select",
         "id":"type",
         "label":"Type",
         "default":"product",
         "options":[
            {
               "value":"none",
               "label":"None"
            },
            {
               "value":"product",
               "label":"Product"
            },
            {
               "value":"image",
               "label":"Image"
            }
         ]
      },
      {
         "type":"select",
         "id":"image_height",
         "label":"Image Height",
         "default":"auto",
         "options":[
            {
               "value":"auto",
               "label":"Auto"
            },
            {
               "value":"fill",
               "label":"Fill"
            }
         ]
      },
      {
        "type":"product",
        "id":"bproduct",
        "label":"Product"
      },
      {
        "type":"image_picker",
        "id":"image",
        "label":"Image"
      },
      {
        "type":"url",
        "id":"link",
        "label":"Image link",
        "default":"/collections"
      },
      {
         "type":"text",
         "id":"b_title",
         "label":"Title",
         "default":"Daily deal"
      },
      {
         "type":"text",
         "id":"b_subtitle",
         "label":"Subtitle",
         "default":"end in:"
      },
      {
         "type":"text",
         "id":"countdown",
         "label":"Date countdown",
         "placeholder":"MM/DD/YYYY"
      }
   ],
   "presets":[
      {
         "name":"Products Grid v2",
         "category":"Collection"
      }
   ]
}
{% endschema %}